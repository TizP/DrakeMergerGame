<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drake Merger RPG</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h1>Drake Merger RPG</h1>

    <div id="game-container">
        <!-- Status Bar -->
        <div id="status-bar">
            <span>Resources: <span id="resource-count">0</span></span>
            <span>Essence: <span id="essence-count">0</span></span>
            <span>Shards: <span id="shards-count">0</span></span>
            <span>Highest Drake: <span id="highest-drake">None</span></span>
        </div>

        <!-- Game Grid -->
        <div id="game-grid">
            <!-- Grid slots generated by JavaScript -->
        </div>

        <!-- Controls Area -->
        <div id="controls">
            <button id="buy-drake-btn">Buy Drake Egg (Cost: <span id="buy-cost">10</span>)</button>
            <button id="music-toggle-btn">Toggle Music</button>
            <button id="tutorial-btn">Show Tutorial</button>
            <button id="open-combat-btn">Combat Arena</button>
            <button id="credits-btn">Show Credits</button>
            <button id="save-btn">Save Game</button>
            <button id="load-btn">Load Game</button>
            <button id="delete-save-btn">Delete Save</button>
        </div>

        <!-- Message Box -->
        <div id="message-box"></div>


        <!-- ===== MODALS (Fixed Position Overlays) ===== -->
        <div id="tutorial-box" class="modal-box hidden">
            <button id="tutorial-close-btn" class="close-button modal-close-button">×</button>
            <h3 id="tutorial-title">Tutorial</h3>
            <p id="tutorial-content"></p>
            <button id="tutorial-next-btn">Next</button>
        </div>

        <div id="credits-box" class="modal-box hidden">
            <button id="credits-close-btn" class="close-button modal-close-button">×</button>
            <h3>Credits</h3>
            <p><strong>Music:</strong> "Space Jazz" by Kevin MacLeod (incompetech.com)...</p>
            <p><strong>Sprites/Images:</strong> Generated via Gemini</p>
            <p><strong>Game Development:</strong> [Your Name/Studio Name Here]</p>
        </div>

        <div id="drake-details-panel" class="modal-box hidden">
             <button id="drake-details-close-btn" class="close-button modal-close-button">×</button>
             <div class="details-header">
                 <img id="detail-image" src="" alt="Drake Image" class="details-image">
                 <div class="details-title">
                     <h3 id="detail-name">Drake Name</h3>
                     <span id="detail-level">Level: ?</span>
                     <span id="detail-rarity" class="detail-rarity-text">Rarity: ?</span>
                     <span id="detail-element">?: Element</span>
                 </div>
             </div>
             <div class="details-body">
                 <h4>Stats</h4>
                 <ul id="detail-stats" class="details-stat-list"></ul>
                 <p id="detail-potential">Potential: ?</p>
                 <p id="detail-income">Passive Income: ?/sec</p>
             </div>
        </div>
        <!-- ============================================ -->


        <!-- ===== COMBAT ARENA PANEL (In Document Flow) ===== -->
        <div id="combat-arena-panel" class="hidden">
            <button id="combat-arena-close-btn" class="close-button panel-close-button">×</button>
            <h3>Combat Arena</h3>
            <div class="combat-layout">
                <!-- Enemy Area -->
                <div class="combat-enemy-area">
                    <h4>Wave: <span id="combat-wave-num">1</span></h4>
                    <div id="combat-enemy-display">
                        <img id="combat-enemy-image" src="images/slime.jpeg" alt="Enemy"> <!-- Default Image -->
                        <p id="combat-enemy-name">Waiting...</p>
                        <div class="hp-bar-container enemy-hp-bar"><div id="combat-enemy-hp-bar" class="hp-bar"></div></div>
                        <p class="hp-text"><span id="combat-enemy-hp-current">?</span> / <span id="combat-enemy-hp-max">?</span> HP</p>
                    </div>
                    <div id="combat-messages"></div>
                </div>
                <!-- Player Team Area -->
                <div class="combat-team-area">
                    <h4>Your Team (Drag Drakes Here)</h4>
                    <div id="combat-team-slots" class="combat-slots-container"></div>
                    <button id="combat-start-stop-btn">Start Combat</button>
                </div>
            </div>
        </div>
        <!-- ================================================== -->


    </div> <!-- End Game Container -->

    <audio id="background-music" loop>
        <source src="audio/background_loop.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- JavaScript Modules -->
    <script type="module" src="js/main.js"></script>
</body>
</html>